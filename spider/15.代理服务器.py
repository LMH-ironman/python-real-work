import urllib.request

url = "https://www.baidu.com/s?wd=ip"

headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.57X-Requested-With: XMLHttpRequest',
            # "Cookie":"BIDUPSID=43866FD6A8AEA77B1BD59B401F413539; PSTM=1658469988; sug=0; sugstore=0; bdime=0; BAIDUID=754311707EE8C70212E19B9A31FFC52C:FG=1; BD_UPN=12314753; MCITY=-233%3A; H_WISE_SIDS=219946_234020_216837_213345_214804_219942_110085_243890_244719_247148_249893_256347_254831_256739_257289_257586_257994_258373_258369_258958_230288_257015_259216_259287_251786_259704_258772_234295_234208_257261_259909_254300_260357_253022_260334_250302_258578_261562_261644_261705_261720_261507_261861_262184_262165_260440_261800_262252_236312_262490_262452_261868_262417_262600_262607_262676_262597_262604_259519_259949_262754_262743_262746_259308_263181_263074_256998_263199_259740_263220_261461_263279_243616_261683_261620_259033_261411_263582_261463_262532_262910_257169_263903_263794_264049_263610_256419_264172_253975_263898_262917_256223_264290_262262_255224_264020_264367_259558_256083_264452_264136_264246_261934; H_WISE_SIDS_BFESS=219946_234020_216837_213345_214804_219942_110085_243890_244719_247148_249893_256347_254831_256739_257289_257586_257994_258373_258369_258958_230288_257015_259216_259287_251786_259704_258772_234295_234208_257261_259909_254300_260357_253022_260334_250302_258578_261562_261644_261705_261720_261507_261861_262184_262165_260440_261800_262252_236312_262490_262452_261868_262417_262600_262607_262676_262597_262604_259519_259949_262754_262743_262746_259308_263181_263074_256998_263199_259740_263220_261461_263279_243616_261683_261620_259033_261411_263582_261463_262532_262910_257169_263903_263794_264049_263610_256419_264172_253975_263898_262917_256223_264290_262262_255224_264020_264367_259558_256083_264452_264136_264246_261934; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; H_PS_PSSID=36557_38642_38831_39027_38881_38959_38956_38982_38917_38972_38812_38639_26350; BDSFRCVID=PJuOJexroG0tCGRfmxSj-_tUNmKKvV3TDYLEtY-9tHtRauIVF5UJEG0PtoaGdu_-ox8EogKK3gOTH6KF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF=tJ4toCPMJI_3fP36q4Rh-tFO-frQaC62aKDs_-5gBhcqEIL4eqj5yUuHbxcOB5FLX5nP2foktxbYMxbSj4QoQPT004vm05jb0bPJsxJsJp5nhMt9b67JDMP0-4CHWljy523iob3vQpP-OpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xb6_0Djb-Datttjn2aIOt0Tr25RrjeJrmq4bohjPJX4R9BtQO-DOxoPbn3MotDtn3hIcr5hLNhtRi-qKeQgnk2p52y6CBfhnm04QhyqKzjJoZ0x-jLTny3l3ebxAVDPP9QtnJyUnybPnnBT5i3H8HL4nv2JcJbM5m3x6qLTKkQN3T-PKO5bRu_CFhJKI2MIKCePbShnLOqlO-2tJ-ajPX3b7EfMJkfq7_bJ7KhUbQ5-bxQt5LMN7Bsx72QlrVOpvC36bxQhFTQqOke6cJWTnN345YQqLhSqcHQT3m5-4_QUOtyKryMnb4Wb3cWKOJ8UbSjxRPBTD02-nBat-OQ6npaJ5nJq5nhMJmb67JDMr0exbH55ueJRkJ_f5; H_PS_645EC=1e0anRrgRwRHGDvqvvpOSKadDnG2Jh7Ijkd0SNnPzHajGYvJYBq2EL5cBrA; BAIDUID_BFESS=754311707EE8C70212E19B9A31FFC52C:FG=1; BDSFRCVID_BFESS=PJuOJexroG0tCGRfmxSj-_tUNmKKvV3TDYLEtY-9tHtRauIVF5UJEG0PtoaGdu_-ox8EogKK3gOTH6KF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF_BFESS=tJ4toCPMJI_3fP36q4Rh-tFO-frQaC62aKDs_-5gBhcqEIL4eqj5yUuHbxcOB5FLX5nP2foktxbYMxbSj4QoQPT004vm05jb0bPJsxJsJp5nhMt9b67JDMP0-4CHWljy523iob3vQpP-OpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xb6_0Djb-Datttjn2aIOt0Tr25RrjeJrmq4bohjPJX4R9BtQO-DOxoPbn3MotDtn3hIcr5hLNhtRi-qKeQgnk2p52y6CBfhnm04QhyqKzjJoZ0x-jLTny3l3ebxAVDPP9QtnJyUnybPnnBT5i3H8HL4nv2JcJbM5m3x6qLTKkQN3T-PKO5bRu_CFhJKI2MIKCePbShnLOqlO-2tJ-ajPX3b7EfMJkfq7_bJ7KhUbQ5-bxQt5LMN7Bsx72QlrVOpvC36bxQhFTQqOke6cJWTnN345YQqLhSqcHQT3m5-4_QUOtyKryMnb4Wb3cWKOJ8UbSjxRPBTD02-nBat-OQ6npaJ5nJq5nhMJmb67JDMr0exbH55ueJRkJ_f5; baikeVisitId=af935033-cac5-4524-9c9b-94e66bd05bcf; COOKIE_SESSION=4_1_6_8_2_10_1_1_6_7_2_6_9_0_0_0_1688825167_1688890154_1688890522%7C9%23876169_115_1688890148%7C9",
            # "Accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7"
           }

request = urllib.request.Request(url=url,headers=headers)
#自己订做一个代理ip
proxies={"http":"162.14.81.15:8000"}
handler =urllib.request.ProxyHandler(proxies=proxies)
opener = urllib.request.build_opener(handler)
response = opener.open(request)
# response = urllib.request.urlopen(request)

content = response.read().decode("utf-8")

with open("daili.html","w",encoding="utf-8") as  fp:
    fp.write(content)
